<!-- ê³µí†µ í—¤ë” í”„ë˜ê·¸ë¨¼íŠ¸: í˜ì´ì§€ì˜ <body> ì•ˆì—ì„œ th:replace ë¡œ ì‚½ì… -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="header">
  <header class="sh-header">
    <div class="sh-header__left">
      <button class="sh-iconbtn" aria-label="ë©”ë‰´ ì—´ê¸°" onclick="SH.toggleSide()">
        <span class="sh-icon">â‰¡</span>
      </button>
      <a class="sh-brand" th:href="@{/}">StudyHub</a>
    </div>

    <nav class="sh-nav">
      <a th:href="@{/explore}" class="sh-nav__link">ìŠ¤í„°ë”” íƒìƒ‰</a>
      <a th:href="@{/sessions}" class="sh-nav__link">ë‚´ ìŠ¤í„°ë””</a>
      <a th:href="@{/support}" class="sh-nav__link">1:1 ë¬¸ì˜</a>
    </nav>

    <!-- ì˜¤ë¥¸ìª½: í•œ ì¤„ ê³ ì • -->
    <div class="sh-header__right">
      <!-- ë¹„íšŒì› -->
      <div class="sh-auth" th:if="${currentUser == null}">
        <a class="sh-btn sh-btn--ghost" th:href="@{/login}">ë¡œê·¸ì¸</a>
        <a class="sh-btn sh-btn--primary" th:href="@{/register}">íšŒì›ê°€ì…</a>
      </div>

      <!-- íšŒì›: ë‹‰ë„¤ì„ â†’ ì¢… â†’ ë¡œê·¸ì•„ì›ƒ (ê°€ë¡œ í•œ ì¤„, ì¤„ë°”ê¿ˆ ê¸ˆì§€) -->
      <div class="sh-auth sh-auth--row" th:if="${currentUser != null}">
        <span class="sh-user__name" th:text="${currentUser.nickname}">ë‹‰ë„¤ì„</span>
        <button class="sh-iconbtn" aria-label="ì•Œë¦¼" onclick="SH.toggleBell()">
          <span class="sh-icon">ğŸ””</span>
          <span id="sh-badge" class="sh-badge" style="display:none;">0</span>
        </button>
        <a class="sh-btn sh-btn--ghost" th:href="@{/logout}">ë¡œê·¸ì•„ì›ƒ</a>
      </div>
    </div>
  </header>

  <!-- ì•Œë¦¼ íŒì˜¤ë²„ -->
  <div id="sh-bell" class="sh-popover" style="display:none;">
    <div class="sh-popover__header">ì•Œë¦¼</div>
    <div id="sh-bell-list" class="sh-popover__body">
      <div class="sh-empty">ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>
    </div>
  </div>

  <!-- ì‚¬ì´ë“œ ìŠ¬ë¼ì´ë“œ ë©”ë‰´ -->
  <aside id="sh-side" class="sh-side" style="display:none;">
    <div class="sh-side__header">
      <span>ë¹ ë¥¸ ì´ë™</span>
      <button class="sh-iconbtn" aria-label="ë‹«ê¸°" onclick="SH.toggleSide()">âœ•</button>
    </div>
    <div class="sh-side__body">
      <a th:href="@{/}" class="sh-side__link">í™ˆ</a>
      <a th:href="@{/explore}" class="sh-side__link">ìŠ¤í„°ë”” íƒìƒ‰</a>
      <a th:href="@{/sessions}" class="sh-side__link">ë‚´ ìŠ¤í„°ë””</a>
      <a th:href="@{/support}" class="sh-side__link">1:1 ë¬¸ì˜</a>
      <div class="sh-side__sep"></div>
      <a th:if="${currentUser == null}" th:href="@{/login}" class="sh-side__link">ë¡œê·¸ì¸</a>
      <a th:if="${currentUser == null}" th:href="@{/register}" class="sh-side__link">íšŒì›ê°€ì…</a>
      <a th:if="${currentUser != null}" th:href="@{/logout}" class="sh-side__link">ë¡œê·¸ì•„ì›ƒ</a>
    </div>
  </aside>

  <script>
    window.SH = window.SH || {};
    SH.toggleSide = function () {
      const el = document.getElementById('sh-side');
      el.style.display = (el.style.display === 'none' || !el.style.display) ? 'block' : 'none';
    }
    SH.toggleBell = function () {
      const el = document.getElementById('sh-bell');
      el.style.display = (el.style.display === 'none' || !el.style.display) ? 'block' : 'none';
    }
  </script>
</th:block>
</html>
