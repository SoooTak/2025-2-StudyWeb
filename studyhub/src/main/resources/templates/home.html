<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title>StudyHub 홈</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" th:href="@{/app.css}"/>
</head>
<body>
  <!-- 공통 헤더 -->
  <div th:replace="~{fragments/header :: header}"></div>

  <main class="sh-container">
    <!-- 히어로(축소) -->
    <section class="sh-hero sh-hero--compact">
      <h1>스터디 통합 운영 웹사이트</h1>
      <p class="sh-muted">모집과 활동을 한 곳에서</p>
      <p class="sh-subnote">202311388 김민상 · 창업프로젝트2</p>
    </section>

    <!-- ✅ 내 스터디: 하나의 섹션으로 통일 -->
    <section class="sh-card" id="my-studies">
      <div class="sh-card__header">
        <h2>내 스터디</h2>
      </div>

      <!-- 비회원: 로그인 유도 -->
      <div th:if="${currentUser == null}" class="sh-empty">
        로그인하고 내 스터디를 확인하세요. <a class="sh-link" th:href="@{/login}">로그인</a>
      </div>

      <!-- 회원: JS가 /api/mystudies 로딩 후 렌더 -->
      <div th:if="${currentUser != null}">
        <div id="myStudiesLoading" class="sh-card sh-card--ghost">불러오는 중…</div>
        <div id="myStudiesContent" class="sh-mylist" style="display:none;"></div>
      </div>
    </section>

    <!-- 일정 -->
    <section class="sh-card">
      <div class="sh-card__header">
        <h2>일정</h2>
        <span class="sh-muted">내가 속한 모든 스터디 일정이 달력에 표시됩니다.</span>
      </div>
      <div class="sh-calendar-placeholder">
        달력이 여기에 표시됩니다. 
      </div>
    </section>

    <!-- 캐러셀 2줄 (페이지 방식: 3개씩 고정 노출) -->
    <section class="sh-grid-2">
      <!-- 최신 스터디 -->
      <div class="sh-card">
        <div class="sh-card__header"><h3>최신 스터디</h3></div>
        <div id="latestCarousel" class="sh-carousel">
          <button class="sh-car-arrow sh-car-prev" aria-label="이전" data-key="latest">‹</button>
          <div class="sh-carousel__viewport">
            <div id="latestTrack" class="sh-carousel__track"></div>
          </div>
          <button class="sh-car-arrow sh-car-next" aria-label="다음" data-key="latest">›</button>
        </div>
      </div>

      <!-- 마감 임박 -->
      <div class="sh-card">
        <div class="sh-card__header"><h3>마감 임박</h3></div>
        <div id="deadlineCarousel" class="sh-carousel">
          <button class="sh-car-arrow sh-car-prev" aria-label="이전" data-key="deadline">‹</button>
          <div class="sh-carousel__viewport">
            <div id="deadlineTrack" class="sh-carousel__track"></div>
          </div>
          <button class="sh-car-arrow sh-car-next" aria-label="다음" data-key="deadline">›</button>
        </div>
      </div>
    </section>
  </main>

  <script defer th:src="@{/notify.js}"></script>
  <script defer th:src="@{/home.js}"></script>
</body>
</html>
